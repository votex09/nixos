# NixOS Configuration

This repository contains a complete, modular, and easily deployable NixOS configuration managed via Git. It's designed to be a solid foundation for setting up multiple NixOS machines from a single, version-controlled source.

## Features

- **Declarative Setup**: Fully declarative configuration for reproducible builds.
- **One-Liner Install**: A simple one-liner command to deploy the entire system.
- **Modular Structure**: Configuration is split into logical files (`users.nix`, `packages.nix`, etc.) for easy management.
- **Centralized Settings**: A single `settings.nix` file for common customizations like hostname, user, and desktop environment.
- **Wayland First**: Configured to prefer Wayland sessions for modern desktop environments like GNOME and KDE.
- **Safe Uninstall**: Includes an uninstaller script to cleanly revert the system to its pre-installation state.

---

## Installation

To deploy this configuration on a fresh NixOS installation, run the following command in your terminal. The script requires `sudo` privileges and will prompt for your password.

```bash
curl -sL https://raw.githubusercontent.com/votex09/nixos/main/tools/install.sh | sudo bash
```

Alternatively, you can download and run it explicitly:

```bash
curl -sL https://raw.githubusercontent.com/votex09/nixos/main/tools/install.sh -o /tmp/install.sh
sudo bash /tmp/install.sh
```

### How It Works

The `install.sh` script automates the following steps:

1.  **Clones Repository**: Clones this Git repository to `/home/nixosV`.
2.  **Copies Hardware Profile**: Copies the machine-specific `hardware-configuration.nix` generated by the NixOS installer into the repository.
3.  **Links Configuration**: Backs up the original NixOS configuration and points the system to use the entry point (`configuration.nix`) from the cloned repository.
4.  **Applies Configuration**: Runs `nixos-rebuild switch` to build and activate the new system configuration.

---

## Post-Installation

After the installation script completes, your system will be running the new configuration. However, the user account created does not have a password set.

**You must set a password for your user.** Open a terminal and run:

```bash
sudo passwd <username>
```

Replace `<username>` with the username you defined in `system/settings.nix` (the default is `nixos`).

---

## Customization

Modifying your system is as simple as editing the files in `/home/nixosV` and running `sudo nixos-rebuild switch`.

- **General Settings**: To change your hostname, timezone, username, or desktop environment, edit `/home/nixosV/system/settings.nix`.
- **System Packages**: To add or remove system-wide software, modify the list in `/home/nixosV/system/packages.nix`.
- **Services**: To enable or disable system services, edit `/home/nixosV/system/services.nix`.

After making changes, commit them to your Git repository to keep your configuration history clean.

```bash
cd /home/nixosV
git add .
git commit -m "feat: add my new package"
git push
```

---

## Uninstallation

If you wish to revert your system to the state it was in before running the installer, you can use the `uninstall.sh` script. It will restore the original NixOS configuration and remove the cloned repository.

```bash
curl -sL https://raw.githubusercontent.com/votex09/nixos/main/tools/uninstall.sh | sudo bash
```

Alternatively:

```bash
curl -sL https://raw.githubusercontent.com/votex09/nixos/main/tools/uninstall.sh -o /tmp/uninstall.sh
sudo bash /tmp/uninstall.sh
```

The uninstaller will automatically rebuild the system with the old configuration, effectively undoing all changes.
