# NixOS Configuration

This repository contains a complete, modular, and easily deployable NixOS configuration managed via Git. It's designed to be a solid foundation for setting up multiple NixOS machines from a single, version-controlled source.

## Features

- **Declarative Setup**: Fully declarative configuration for reproducible builds.
- **One-Liner Install**: A simple one-liner command to deploy the entire system.
- **Modular Structure**: Configuration is split into logical files (`users.nix`, `packages.nix`, etc.) for easy management.
- **Centralized Settings**: A single `settings.nix` file for common customizations like hostname, user, and desktop environment.
- **Wayland First**: Configured to prefer Wayland sessions for modern desktop environments like GNOME and KDE.
- **Safe Uninstall**: Includes an uninstaller script to cleanly revert the system to its pre-installation state.

---

## Installation

To deploy this configuration on a fresh NixOS installation, run the following command in your terminal. The launcher will prompt for your username and password, then install the system.

```bash
bash <(curl -sL https://raw.githubusercontent.com/votex09/nixos/main/tools/install-launcher.sh)
```

Alternatively, you can download and run it explicitly:

```bash
curl -sL https://raw.githubusercontent.com/votex09/nixos/main/tools/install-launcher.sh -o /tmp/install-launcher.sh
bash /tmp/install-launcher.sh
```

### How It Works

The `install.sh` script automates the following steps:

1.  **Clones Repository**: Clones this Git repository to `/home/nixosV`.
2.  **Copies Hardware Profile**: Copies the machine-specific `hardware-configuration.nix` generated by the NixOS installer into the repository.
3.  **Configures User Account**: Prompts you to choose a username (or accept the default "nixos") and set a password. The password is set BEFORE switching configurations to ensure you won't be locked out.
4.  **Links Configuration**: Backs up the original NixOS configuration and points the system to use the entry point (`configuration.nix`) from the cloned repository.
5.  **Applies Configuration**: Runs `nixos-rebuild switch` to build and activate the new system configuration.

The script is fully interactive and will guide you through each step. After completion, reboot your system and log in with the username and password you configured.

---

## Customization

Modifying your system is as simple as editing the files in `/home/nixosV` and running `sudo nixos-rebuild switch`.

- **General Settings**: To change your hostname, timezone, username, or desktop environment, edit `/home/nixosV/system/settings.nix`.
- **System Packages**: To add or remove system-wide software, modify the list in `/home/nixosV/system/packages.nix`.
- **Services**: To enable or disable system services, edit `/home/nixosV/system/services.nix`.

After making changes, commit them to your Git repository to keep your configuration history clean.

```bash
cd /home/nixosV
git add .
git commit -m "feat: add my new package"
git push
```

## Updating

To update your system with the latest changes from the GitHub repository, simply run:

```bash
update
```

The command will automatically elevate to sudo when needed, pull the latest configuration from GitHub, and rebuild your system.

---

## Uninstallation

If you wish to revert your system to the state it was in before running the installer, you can use the `uninstall.sh` script. It will restore the original NixOS configuration and remove the cloned repository.

```bash
curl -sL https://raw.githubusercontent.com/votex09/nixos/main/tools/uninstall.sh | sudo bash
```

Alternatively:

```bash
curl -sL https://raw.githubusercontent.com/votex09/nixos/main/tools/uninstall.sh -o /tmp/uninstall.sh
sudo bash /tmp/uninstall.sh
```

The uninstaller will automatically rebuild the system with the old configuration, effectively undoing all changes.
